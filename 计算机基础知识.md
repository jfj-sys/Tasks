# 互联网

互联网就是指将两台计算机或者是两台以上的计算机终端、客户端、服务端通过计算机信息技术的手段互相联系起来的结果

## 互联网的构成

**网络边缘**:位于互联网边缘与互联网相连的计算机和其他设备,如桌面计算机、移动计算机、服务器、其他智能终端设备
**网络核心**:由互联端系统的分组交换设备和通信链路构成的网状网络
如：分组交换路由器、链路层交换机、通信链路(光纤、铜缆、无线电、激光链路)

# 域名

**域名（英语：Domain Name）**，又称[网域](https://zhida.zhihu.com/search?content_id=176725135&content_type=Article&match_order=1&q=网域&zhida_source=entity)，是由一串用点分隔的名字组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时对计算机的定位标识（有时也指地理位置）。

**常见的域名后缀**

**.com **- 供商业机构使用，但无限制最常用，被大部分人熟悉和使用。

**.net** - 供网络服务供应商使用，现无限制。

**.cn** -代表中国，以.cn结尾即中国国内域名，适用于其国内各机构、企业，常称为英文国内顶级域名。

**.http://gov.cn**- 专用国内政府机关使用域名后缀。

**.biz** - 供商业公司使用。

# 域名系统DNS

##  概述

**域名系统**（DNS，Domain Name System）是互联网重要的基础设施之一，向所有需要域名解析的应用提供服务，主要负责将**可读性好的域名映射成IP地址**

名字到域名的解析是由**若干个**域名服务器程序完成的。域名服务器程序在专设的结点上运行，相应的结点也称为**名字服务器**(Name Server)或**域名服务器**(Domain Name Server)

![](http images/v2-6138075ba26170e06c111893e04b62ca_1440w.png)

![](http images/v2-d21ca706e58d6e1850b99389ec8e1887_1440w.jpg)

![](http images/v2-643ab0e163b7d443d71075e46214a6bd_1440w.png)

**本地域名服务器：**也叫递归域名服务器，是离用户终端设备最近的域名服务器

**根服务器**：DNS中最高层次的服务器，全球共13台逻辑根服务器

**顶级域名服务器**：负责管理特定顶级域名（如.com、.org  .net  .cn等）的服务器

**权威域名服务器**：对特定域名具有最终解释权的服务器

## 域名解析过程

### 递归查询

当收到查询请求报文的域名服务器不知被查询域名的IP地址时，该域名服务器就以DNS客户的身份向下一步应查询的域名服务器发出查询请求，即替本地域名字服务器继续查询

![](http images/v2-19e3a9fb4c6ece770a9c346deff17e9e_1440w.jpg)

## 迭代查询

当收到查询请求报文的域名服务器不知道被查询域名的IP地址时，就把自己知道的下一步应查询的域名服务器IP地址告诉本地域名字服务器，由本地域名字服务器继续向该域名服务器查询，直到得到所要解析的域名的IP地址，或者查询不到所要解析的域名的IP地址

![](http images/v2-b348fbbd177d397c4042c487f48756bf_1440w.jpg)

# 服务器

**服务器的英文名称为“ Server”，是指在网络上提供各种服务的高性能计算机。**作为网络的节点，存储、处理网络上80％的数据、信息，因此也被称为网络的灵魂。

**服务器和普通计算机的功能是类似的。**只是相对于普通计算机，服务器在稳定性、安全性、性能等方面都要求更高，因此CPU、芯片组、内存、磁盘系统、网络等硬件和普通计算机有所不同。**具体来说，服务器与普通计算机的主要区别包括：**

**通信方式为一对多：**PC、平板、手机等固定或移动的网络终端，上网、获取资讯、与外界沟通、娱乐等，必然要经过服务器，服务器通过“一对多”来组织和领导这些设备。

**资源通过网络共享**：服务器通过侦听网络上其它终端（Client）提交的服务请求，在网络操作系统的控制下，将与其相连的硬盘、打印机、Modem及各种专用通讯设备提供给网络上的客户站点共享，也能为网络用户提供集中计算、信息发表及数据管理等服务。

**硬件性能更加强大：**服务器的高性能主要体现在高速度的运算能力、长时间的可靠运行、强大的外部数据吞吐能力等方面。

服务器厂商会根据不同的应用场景，对服务器进行差异化设计，目前主要的应用场景包括文件交互、数据存储和查询、应用程序应答与运行等。

# 浏览器

## 功能

是将用户选择的web资源呈现出来，它需要从服务器请求资源，并将其显示在浏览器窗口中，资源的格式通常是HTML，也包括PDF、image及其他格式。用户用URI（Uniform Resource Identifier统一资源标识符）来指定所请求资源的位置。

## 浏览器的主要组件：

**用户界面 **－ 包括地址栏、后退/前进按钮、书签目录等，也就是你所看到的除了用来显示你所请求页面的主窗口之外的其他部分。

**浏览器引擎**－ 用来查询及操作渲染引擎的接口。

**渲染引擎** － 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的结果显示出来。

**网络** － 用来完成网络调用，例如http请求，它具有平台无关的接口，可以在不同平台上工作。

**UI后端 **－ 用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口。

**JS解释器** － 用来解释执行JS代码。

## 加载过程

### 在浏览器中输入url

###  查看浏览器缓存

如果访问过该url，会先进入浏览器缓存中查询是否有要请求的文件（浏览器缓存是在本地保存资源副本）。

当浏览器发现请求的资源已经在浏览器缓存中存有副本，它会拦截请求，返回该资源的副本，并直接结束请求，而不会再去源服务器重新下载。如果缓存查找失败，就会进入网络请求过程了。

如果在浏览器缓存里没有找到需要的记录，浏览器会做一个系统调用获得系统缓存中的记录

### DNS域名解析

### 获取端口号

可能域名下有多个端口号，对应着不同的网络功能，所以在DNS解析之后，浏览器还会获取端口号。

### 建立TCP连接

### HTTP请求

![](http images/v2-1fb8d339b915dd337c86a9283c3073c0_1440w.jpg)

http协议向服务器发送请求，发送请求的过程中，浏览器会向Web服务器以Stream(流)的形式传输数据，告诉Web服务器要访问服务器里面的哪个Web应用下的Web资源。

服务器接收到浏览器传输的数据后，开始解析接收到的数据，服务器解析请求里面的内容时知道客户端浏览器要访问的是应用里面的哪这个Web资源，然后服务器就去读取这个Web资源里面的内容，将读到的内容再以Stream(流)的形式传输给浏览器。

### 关闭TCP

### 浏览器渲染

当浏览器获得一个html文件时，会自上而下的加载，并在加载过程中进行解析渲染。

**解析：**

1. 浏览器会将HTML解析成一个[DOM树](https://zhida.zhihu.com/search?content_id=163179997&content_type=Article&match_order=1&q=DOM树&zhida_source=entity)，DOM 树的构建过程是一个深度遍历过程：当前节点的所有子节点都构建好后才会去构建当前节点的下一个兄弟节点。
2. 将CSS解析成 CSS Rule Tree 。
3. 根据DOM树和CSSOM来构造 Rendering Tree。注意：Rendering Tree 渲染树并不等同于 DOM 树，因为一些像 Header 或 display:none 的东西就没必要放在渲染树中了。
4. 有了Render Tree，浏览器已经能知道网页中有哪些节点、各个节点的CSS定义以及他们的从属关系。下一步操作称之为Layout，顾名思义就是计算出每个节点在屏幕中的位置。

1. 再下一步就是绘制，即遍历[render树](https://zhida.zhihu.com/search?content_id=163179997&content_type=Article&match_order=1&q=render树&zhida_source=entity)，并使用UI后端层绘制每个节点

**渲染：**

1. 接收服务器返回html文件。
2. 浏览器开始载入[html代码](https://zhida.zhihu.com/search?content_id=163179997&content_type=Article&match_order=1&q=html代码&zhida_source=entity)，发现＜head＞标签内有一个＜link＞标签引用外部CSS文件，浏览器又发出CSS文件的请求，服务器返回这个CSS文件。
3. 浏览器继续载入html中＜body＞部分的代码，并且CSS文件已经拿到手了，可以开始渲染页面了。
4. 浏览器在代码中发现一个＜img＞标签引用了一张图片，向服务器发出请求。此时浏览器不会等到图片下载完，而是继续渲染后面的代码。
5. 服务器返回图片文件，由于图片占用了一定面积，影响了后面段落的排布，因此浏览器需要回过头来重新渲染这部分代码。
6. 浏览器发现了一个包含一行Javascript代码的＜script＞标签，赶快运行它。
7. Javascript脚本执行了这条语句，它命令浏览器隐藏掉代码中的某个＜div＞ （style.display=”none”）。突然少了这么一个元素，浏览器不得不重新渲染这部分代码。
8. 终于等到了＜/html＞的到来，浏览器泪流满面。
9. 等等，还没完，用户点了一下界面中的“换肤”按钮，Javascript让浏览器换了一下＜link＞标签的CSS路径。
10. 浏览器召集了在座的各位＜div＞＜span＞＜ul＞＜li＞们，“大伙儿收拾收拾行李，咱得重新来过……”，浏览器向服务器请求了新的CSS文件，重新渲染页面。