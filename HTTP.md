# HTTP（Hyper Text Transfer Protocol）

## 简介

HTTP是一个应用层协议，由请求和响应构成，是一个标准的客户端服务器模型

**HTTP**是一种用作获取诸如 HTML 文档这类资源的[协议](https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Glossary/Protocol)。它是 Web 上进行任何数据交换的基础，同时，也是一种客户端—服务器（client-server）协议，也就是说，请求是由接受方——通常是浏览器——发起的。一个完整网页文档是由获取到的不同文档组件——像是文本、布局描述、图片、视频、脚本等——重新构建出来的

#### 作用

用于www服务器传输超文本到本地浏览器的传送协议

#### 特点

HTTP是一种不保存状态,即无状态(stateless)协议。HTTP协议自身不对请求和响应之间的通信状态进行保存。也就是说在HTTP这个级别,协议对于发送过的请求或响应都不做持久化处理

**优点**：使浏览器更加高效，使网络传输减少

## 工作原理

客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行为作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。

**1.客户端连接到Web服务器**

一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80)建立一个TCP套接字连接。

**2.发送HTTP请求**

通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，==一个请求报文由请求行、请求头部、空行和请求数据4部分组成。==

**3.服务器接受请求并返回HTTP响应**

Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。==一个晌应由状态行、响应头部、空行和响应数据4部分组成。==

**4.释放连接TCP连接**

若connection模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection模式为keepalive，则该连接会保持段时间，在该时间内可以继续接收请求;

**5.客户端浏览器解析HTML内容**

客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。

## HTTP请求方法

**GET**

向指定的资源发出显示"请求。使用GET方法应该只用在读取数据，而不应当被用于产生"副作用"的操作中，例如在Web Application中。其中一个原因是GET可能会被网络蜘蛛等随意访问。

**HEAD**

与GET方法一样，都是向服务器发出指定资源的请求。只不过服务器将不传回资源的本文部分。它的好处在于，使用这个方法可以在不必传输全部内容的情况下，就可以获取其中“关于该资源的信息”(元信息或称元数据)。

**POST**

向指定资源提交数据，请求服务器进行处理（例如提交表单或者上传文件)。数据被包含在请求本文中。这个请求可能会创建新的资源或修改现有资源，或二者皆有。

**PUT**

向指定资源位置上传其最新内容。

**DELETE**

请求服务器删除Request-URI所标识的资源。

**TRACE**

回显服务器收到的请求，主要用于测试或诊断。

**OPTIONS**

这个方法可使服务器传回该资源所支持的所有HTTP请求方法。用"*"来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作。

**CONNECT**

HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接（经由非加密的HTTP代理服务器)。



==注：==方法名称是区分大小写的。当某个请求所针对的资源不支持对应的请求方法的时候，服务器应当返回状态码405(Method NotAllowed)，当服务器不认识或者不支持对应的请求方法的时候，应当返回状态码501(Not lmplemented)。

## HTTP状态码

|      | 类别                             | 原因短语                                                     |
| ---- | -------------------------------- | ------------------------------------------------------------ |
| 1XX  | Informational（信息性状态码）    | 接受的请求正在处理                                           |
| 2XX  | Success（成功状态码）            | 请求正常处理完毕                                             |
| 3XX  | Redirection（重定向状态码）      | 需要进行附加操作以完成请求                                   |
| 4XX  | Client Error（客户端错误状态码） | 服务器无法处理请求（请求含有词法错误或者无法被执行）         |
| 5XX  | Server Error（服务器错误状态码） | 服务器处理请求出错（服务器正在在处理某个正确请求时发生错误） |

## URL

超文本传输协议(HTTP)的统一资源定位符将从因特网获取信息的五个基本元素包括在一个简单的地址中:

1. 传送协议。层级URL标记符号(为[I,固定不变)访问资源需要的凭证信息（可省略）服务器。(通常为域名，有时为IP地址)。
2. 端口号。(以数字方式表示，若为HTTP的默认值":80"可省略）路径。(以"字符区别路径中的每一个目录名称)
3. 查询。(GET模式的窗体参数，以"?"字符为起点，每个参数以"&―隔开，再以"=分开参数名称与数据，通常以UTF8的URL编码，避开字符冲突的问题)
4. 片段。以“字符为起点

以http:l/[http://www.luffycity.com:80/news/index.htmI?id=250&page=1](https://link.zhihu.com/?target=http%3A//www.luffycity.com%3A80/news/index.htmI%3Fid%3D250%26page%3D1)为例,其中:http，是协议;

[www.luffycity.com](https://link.zhihu.com/?target=http%3A//www.luffycity.com)，是服务器;

80，是服务器上的默认网络端口号，默认不显示;

/news/index.html，是路径(URI:直接定位到对应的资源);?id=250&page=1，是查询。

## 报文结构

#### HTTP请求格式

![](C:\geek study\http images\v2-d24992909bf598fdef88a2fcd62d66ed_r.jpg)

![](C:\geek study\http images\v2-b986dddc46442d1f00f5480131cb5bde_1440w.jpg)

#### HTTP响应格式

![](C:\geek study\http images\v2-359a57ecea3226354bf2e047435b6075_1440w.jpg)

![](C:\geek study\http images\v2-bbdba29a4cdac2317ea5c6b270021be9_1440w.jpg)